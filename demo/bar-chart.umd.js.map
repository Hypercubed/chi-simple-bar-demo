{"version":3,"sources":["bars-chart.js"],"names":[],"mappings":"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","file":"bar-chart.umd.js","sourcesContent":["import d3 from 'd3';\n\nimport './bars.css!';\n\nexport function Bars (opts) {\n  opts = opts || {};\n\n  const margin = opts.margin || {top: 20, right: 20, bottom: 30, left: 40};\n  let width = 960 - margin.left - margin.right; // 900\n  let height = 500 - margin.top - margin.bottom; // 440\n  const title = opts.title || 'Bar Chart';\n\n  const formatPercent = d3.format('.0%');\n\n  const xValue = d => d.letter; // data -> value\n  const xScale = d3.scale.ordinal(); // value -> display\n  const xMap = d => xScale(xValue(d)); // data -> display\n  const xAxis = d3.svg.axis().scale(xScale).orient('bottom');\n\n  const yValue = d => d.frequency; // data -> value\n  const yScale = d3.scale.linear(); // value -> display\n  const yMap = d => yScale(yValue(d)); // data -> display\n  const yAxis = d3.svg.axis().scale(yScale).orient('left').tickFormat(formatPercent);\n  const yAxisLabel = 'Frequency';\n\n  function bars (selection) {\n    selection.each(function (d) {\n      const el = d3.select(this);\n\n      xScale.rangeRoundBands([0, width], 0.1);\n      yScale.range([height, 0]);\n\n      el.selectAll('svg').remove();\n\n      const svg = el.append('svg')\n        .attr('title', title)\n        .attr('width', width + margin.left + margin.right)\n        .attr('height', height + margin.top + margin.bottom)\n        .append('g')\n          .attr('transform', `translate(${margin.left},${margin.top})`);\n\n      xScale.domain(d.map(xValue));\n      yScale.domain([0, d3.max(d, yValue)]);\n\n      svg.append('g')\n        .attr('class', 'x axis')\n        .attr('transform', `translate(0,${height})`)\n        .call(xAxis);\n\n      svg.append('g')\n        .attr('class', 'y axis')\n        .call(yAxis)\n        .append('text')\n        .attr('transform', 'rotate(-90)')\n        .attr('y', 6)\n        .attr('dy', '.71em')\n        .style('text-anchor', 'end')\n        .text(yAxisLabel);\n\n      svg.selectAll('.bar')\n        .data(d)\n        .enter().append('rect')\n        .attr('class', 'bar')\n        .attr('x', xMap)\n        .attr('width', xScale.rangeBand)\n        .attr('y', yMap)\n        .attr('height', d => height - yMap(d));\n    });\n  }\n\n  bars.width = function (_) {\n    if (arguments.length < 1) {\n      return width;\n    }\n    width = _;\n    return bars;\n  };\n\n  bars.height = function (_) {\n    if (arguments.length < 1) {\n      return height;\n    }\n    if (_ === 'auto') {\n      _ = 440 / 900 * width;\n    }\n    height = _;\n    return bars;\n  };\n\n  return bars;\n}\n\nexport default Bars;\n"]}